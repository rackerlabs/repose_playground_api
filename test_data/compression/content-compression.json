{
  "name": "content-compression",
  "doc": "The Compression filter is a way for Repose to decompress request data and compress response data. The following compression methods are supported. gzip x-gzip deflate",
  "items": [
    {
      "name": "compression",
      "required": "required",
      "maxOccurs": 1,
      "minOccurs": 1,
      "type": "entry",
      "doc": "Exposes compressing filter configuration",
      "assert": [
        {
          "formula": "if (@include-content-types) then not (@exclude-content-types) else true()",
          "message": "Enumerating include-content-type and exclude-content-type is not allowed"
        },
        {
          "formula": "if (@include-user-agent-patterns) then not (@exclude-user-agent-patterns) else true()",
          "message": "Enumerating include-user-agent-patterns and exclude-user-agent-patterns is not allowed"
        }
      ],
      "items": [
        {
          "xsd-type": "attribute",
          "name": "debug",
          "type": "boolean",
          "required": "optional",
          "default": "false",
          "doc": "Debug to servlet log This attribute is deprecated. Logging can be controlled through the log4j2.xml file"
        },
        {
          "xsd-type": "attribute",
          "name": "compression-threshold",
          "type": "int",
          "minInclusive": 0,
          "required": "optional",
          "doc": "sets the size of the smallest response that will be compressed, in bytes. That is, if less than compressionThreshold bytes are written to the response, it will not be compressed and the response will go to the client unmodified. If 0, compression always begins immediately. Defaults to 1024.",
          "default": 1024
        },
        {
          "xsd-type": "attribute",
          "name": "statsEnabled",
          "type": "boolean",
          "required": "optional",
          "default": "false",
          "doc": "enables collection of statistics. This option is deprecated."
        },
        {
          "xsd-type": "attribute",
          "name": "include-content-types",
          "type": "list[string]",
          "required": "optional",
          "default": "false",
          "doc": "if specified, this is treated as a space seperated list of content types (e.g. text/html,text/xml). The filter will attempt to only compress responses which specify one of these values as its content type, for example via ServletResponse.setContentType(String). Note that the filter does not know the response content type at the time it is applied, and so must apply itself and later attempt to disable compression when content type has been set. This will fail if the response has already been committed. Also note that this parameter cannot be specified if exclude-content-types is also configured."
        },
        {
          "xsd-type": "attribute",
          "name": "exclude-content-types",
          "type": "list[string]",
          "required": "optional",
          "default": "false",
          "doc": "if specified, this is treated as a space seperated list of content types (e.g. text/html,text/xml). The filter will attempt to only compress responses which specify one of these values as its content type, for example via ServletResponse.setContentType(String). Note that the filter does not know the response content type at the time it is applied, and so must apply itself and later attempt to disable compression when content type has been set. This will fail if the response has already been committed. Also note that this parameter cannot be specified if exclude-content-types is also configured."
        },
        {
          "xsd-type": "attribute",
          "name": "include-user-agent-patterns",
          "type": "list[string]",
          "required": "optional",
          "default": "false",
          "doc": "if specified, this is treated as a space seperated list of content types (e.g. text/html,text/xml). The filter will attempt to only compress responses which specify one of these values as its content type, for example via ServletResponse.setContentType(String). Note that the filter does not know the response content type at the time it is applied, and so must apply itself and later attempt to disable compression when content type has been set. This will fail if the response has already been committed. Also note that this parameter cannot be specified if exclude-content-types is also configured."
        },
        {
          "xsd-type": "attribute",
          "name": "exclude-user-agent-patterns",
          "type": "list[string]",
          "required": "optional",
          "default": "false",
          "doc": "if specified, this is treated as a space seperated list of content types (e.g. text/html,text/xml). The filter will attempt to only compress responses which specify one of these values as its content type, for example via ServletResponse.setContentType(String). Note that the filter does not know the response content type at the time it is applied, and so must apply itself and later attempt to disable compression when content type has been set. This will fail if the response has already been committed. Also note that this parameter cannot be specified if exclude-content-types is also configured."
        }
      ]
    }
  ]
}